{"name":"Alfred2-top-workflow","tagline":"Alfred 2 Top Processes Based Memory or CPU Usage Workflow  ","body":"# Alfred 2 Top Process Workflow\r\n\r\nThe initial motive of this workflow is to avoid frequent visits to the Activity Monitor when the fan goes loud. Now it has been evloved with two major features:\r\n\r\n- 1) List/Kill Top Processes by Memory/CPU/IO Usage\r\n\r\n![](https://raw.github.com/zhaocai/alfred2-top-workflow/master/screenshots/mixed%20top%20processes.png) \r\n\r\n\r\n- 2) (*working in progress*) Get a glance of system status including internal battery, fan speed, CPU/GPU Temperature, bluetooth battery, disk capacity, etc.\r\n\r\n![](https://raw.github.com/zhaocai/alfred2-top-workflow/master/screenshots/glance.png) \r\n\r\n## Usage\r\n\r\n### 0. Show Help \r\n\r\nJust type `-?`, `-h`, or `--help` after the keyword to show help.\r\n\r\n![](https://raw.github.com/zhaocai/alfred2-top-workflow/master/screenshots/help.png) \r\n\r\n### 1. Top Processes\r\n\r\n#### A. Keywords:\r\n\r\n##### 1.) `top`: Show a mixed processes list based on top cpu/memory usage.\r\n\r\n\r\n###### 1. `top -m`, `top --memory` to show processes ranked by memory usage\r\n\r\n###### 2. `top -c`, `top --cpu`, to show processes ranked by cpu usage\r\n\r\n###### 3. `top -i`, `top --io`, to show processes ranked by io usage with **callback** from top io trace collector.\r\n\r\n   Top IO requires [DTrace][Dtrace] and it would take a while to finish. The new **callback** design is to run the job in he background and post a notification (OSX 10.8+) using notification center. Click on the notification to show the result in alfred.\r\n\r\n![](https://raw.github.com/zhaocai/alfred2-top-workflow/master/screenshots/callback.png) \r\n\r\n\r\n\r\n\r\n###### **Modifier Key**\r\n\r\n   - `none`    : The default action is to list files opened by process ID\r\n   - `control` : Kill the selected process\r\n   - `command` : kill forcefully (`kill -9`)\r\n   - `alt`     : Nice (lower) the selected process's cpu priority\r\n   - `shift`   : Search web for process information\r\n\r\n\r\n##### 2.) `kill`: Filter process to kill.\r\n\r\n###### **Modifier Key**\r\n\r\n   - `none`: The default action is to kill by process ID\r\n   - `command` : kill forcefully (`kill -9`)\r\n\r\n##### 3.) `lsof`: List files opened by process id\r\n\r\n###### **Modifier Key**\r\n\r\n   - `none`: The default action is to reveal file in Finder\r\n\r\n#### B. Filter by Query\r\n\r\n##### 1.) Type process name to filter\r\n\r\n![](https://raw.github.com/zhaocai/alfred2-top-workflow/master/screenshots/filtered%20by%20query.png)\r\n\r\n##### 2.) To search for process state, use **:idle**, **:sleep**, **:stopped**, **:zombie**, **:uninterruptible**, **:runnable**, etc.\r\n\r\n![](https://raw.github.com/zhaocai/alfred2-top-workflow/master/screenshots/top%20sleep.png) \r\n\r\n\r\n### 2. Glance an Eye on your system\r\n\r\n#### A. Keywords:\r\n\r\n1. `glance`: Show system information including internal battery, bluetooth battery, disk capacity, etc.\r\n\r\n![](https://raw.github.com/zhaocai/alfred2-top-workflow/master/screenshots/battery.png)\r\n\r\n#### B. Change Display Order\r\n\r\n1. Activate `Alfred Preferences` → `Advanced` → `Top Result Keyword Latching`\r\n\r\n    ![](https://raw.github.com/zhaocai/alfred2-top-workflow/master/screenshots/Alfred_Preferences_Learning.png)\r\n\r\n2. Hit `Enter` for the feedback item you wish to show up on the top.\r\n\r\n\r\n\r\n## Installation\r\n\r\nTwo ways are provided:\r\n\r\n1. You can download the [Top Processes.alfredworkflow](https://github.com/zhaocai/alfred2-top-workflow/raw/master/Top%20Processes.alfredworkflow) and import to Alfred 2. This method is suitable for **regular users**.\r\n\r\n2. You can `git clone` or `fork` this repository and use `rake install` and `rake uninstall` to install. Check `rake -T` for available tasks.\r\nThis method create a symlink to the alfred workflow directory: \"~/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows\". This method is suitable for **developers**.\r\n\r\n\r\n## Troubleshooting\r\n\r\n### 1. Does not work in Mac OSX 10.9 (Maverick)\r\n\r\nIn OSX 10.9, the system ruby is upgraded to 2.0.0. You need to download the new version of this workflow which packs the ruby gems for 2.0.0 inside.\r\n\r\nIf the downloaded version does not work, try \r\n\r\n1.) open `Terminal.app`. If you use rvm or rbenv, switch to the system ruby.\r\n2. run `cd \"$HOME/Library/Application Support/Alfred 2/Alfred.alfredpreferences/workflows/me.zhaowu.top\" && rake bundle:update`\r\n\r\n\r\n### 2. iotop causes mouse lagging\r\n\r\nThis issue is not caused by this workflow but by [DTrace][DTrace]. The related system log message is `IOHIDSystem cursor update overdue. Resending.`.\r\nIn my Macbook Pro, any [DTrace][DTrace] based program will introduce this issue including the mac built-in `/usr/bin/iotop`, and `/Applications/Xcode.app/Contents/Applications/Instruments.app` .\r\n\r\nI upgrade to OS X 10.9 and this issue is resolved.\r\n\r\n### 3. Encoding::CompatibilityError: incompatible character encodings: ASCII-8BIT and UTF-8\r\n\r\nAdd the following contents to `/etc/launchd.conf`. Restart is required.\r\n```sh\r\nsetenv LANG en_US.UTF-8\r\nsetenv LC_ALL en_US.UTF-8\r\n```\r\n\r\n\r\n## Copyright\r\n\r\nCopyright (c) 2013 Zhao Cai <caizhaoff@gmail.com>\r\n\r\nThis program is free software: you can redistribute it and/or modify it under\r\nthe terms of the GNU General Public License as published by the Free Software\r\nFoundation, either version 3 of the License, or (at your option)\r\nany later version.\r\n\r\nThis program is distributed in the hope that it will be useful, but WITHOUT\r\nANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS\r\nFOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\r\n\r\nYou should have received a copy of the GNU General Public License along with\r\nthis program. If not, see <http://www.gnu.org/licenses/>.\r\n\r\n\r\n\r\n[DTrace]: https://developer.apple.com/library/mac/documentation/Darwin/Reference/ManPages/man1/dtrace.1.html\r\n","google":"UA-2618346-1","note":"Don't delete this file! It's used internally to help with page regeneration."}